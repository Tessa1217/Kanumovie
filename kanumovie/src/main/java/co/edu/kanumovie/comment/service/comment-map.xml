<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.edu.kanumovie.comment.service.CommentMapper">
	<select id="commentAllList"	parameterType="co.edu.kanumovie.comment.vo.CommentVO" resultType="co.edu.kanumovie.comment.vo.CommentVO">
		SELECT c.c_id as cid , c.c_comment as comments , c.c_date as wdate, c.id, c.email, u.nick,u.fileName
		FROM k_movies m
			INNER JOIN k_comment c
		ON ((c.id = m.id) and c.id = #{id})
			INNER JOIN k_users u
		ON ((c.email = u.email))
		ORDER BY CID desc
		
	</select>
	
	<select id="commentSelect" parameterType="int" resultType="String">
		select C_COMMENT from K_comment where C_ID = #{cid}
	</select>

	<insert id="commentInsert" parameterType="co.edu.kanumovie.comment.vo.CommentVO"> 
		insert into k_comment values(COMMENT_ID_SEQ.nextval, #{comments}, SYSDATE, #{id} , #{email})
	</insert>


	<update id="commentUpdate" parameterType="co.edu.kanumovie.comment.vo.CommentVO">
		update k_comment set c_comment = #{comments} where C_ID = #{cid} 
	</update>
	<delete id="commentDelete" parameterType="int">
		DELETE FROM K_COMMENT WHERE C_ID = #{cid}
	</delete> 
	
	
</mapper>