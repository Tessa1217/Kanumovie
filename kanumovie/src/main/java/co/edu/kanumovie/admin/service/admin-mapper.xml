<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.edu.kanumovie.admin.service.AdminMapper">


 <select id="selectAllUserList" resultType="co.edu.kanumovie.user.vo.UserVO" >
        SELECT * FROM K_USERS ORDER BY SIGNDATE DESC
 </select>

<select id="todayUsersCount" resultType="int">

SELECT COUNT(*) 
FROM k_users WHERE 
to_char(signdate, 'yy/mm/dd') = to_char(sysdate, 'yy/mm/dd')

</select>

<select id="selectAllUserCount" resultType="int">

SELECT count(*) FROM k_users
</select>

<select id="selectReportUserList" resultType="co.edu.kanumovie.user.vo.UserVO">
SELECT * FROM k_users WHERE report = 'y'
</select>

<select id="selectBlackList" resultType="co.edu.kanumovie.user.vo.UserVO">

SELECT * FROM k_users WHERE blockcheck = 'y'
</select>



<update id="updateBlockCheck" parameterType="String">
	<!-- update k_users set blockcheck = 'y' 
	WHERE email = #{email} -->
	UPDATE k_USERS SET blockcheck = 'y', report = 'n' WHERE email = #{email}
</update>

<update id="updateReportCheck" parameterType="String">

	UPDATE k_users SET report = 'n' WHERE email = #{email}
</update>

<update id="updateUnblockCheck" parameterType="String">
	UPDATE k_users SET blockcheck = 'n' WHERE email = #{email} 

</update>

<select id="selectAllReportUsers" resultType="int">
SELECT count(*) FROM k_users WHERE report = 'y'
</select>



</mapper>